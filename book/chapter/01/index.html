<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>[Lore.Land] Chapter 01: Boof and the Boonberry Fool</title>

    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!-- External Stylesheets -->
    <link rel="stylesheet" href="/css/fixtures/fonts.css">
    <link rel="stylesheet" href="/css/fixtures/root.css?v=2024_10_04.G">
    <link rel="stylesheet" href="/book/chapter/01/styles.css">

    <!-- Mood and Period Stylesheets (to be set dynamically) -->
    <link id="period-styles" rel="stylesheet">
    <link id="mood-styles" rel="stylesheet">

    <!-- Custom Elements Styles -->
    <link rel="stylesheet" href="/css/custom-elements.css">

    <!-- Accessibility Enhancements -->
    <meta name="description" content="Chapter 1 of Lore.Land: Boof and the Boonberry Fool. Join Boof on his quest to find the elusive Boonberry Fool.">

    <!-- Script to define custom elements and dynamic functionalities -->
    <script>
      // Custom Element Definitions
      class CustomBoof extends HTMLElement {
        constructor() {
          super();
          const shadow = this.attachShadow({ mode: 'open' });
          const wrapper = document.createElement('div');
          wrapper.classList.add('custom-boof-wrapper');
          wrapper.innerHTML = `<slot></slot>`;
          shadow.appendChild(wrapper);
        }
      }

      class CustomBoonberry extends HTMLElement {
        constructor() {
          super();
          const shadow = this.attachShadow({ mode: 'open' });
          const wrapper = document.createElement('div');
          wrapper.classList.add('custom-boonberry-wrapper');
          wrapper.innerHTML = `<slot></slot>`;
          shadow.appendChild(wrapper);
        }
      }

      class CustomFool extends HTMLElement {
        constructor() {
          super();
          const shadow = this.attachShadow({ mode: 'open' });
          const wrapper = document.createElement('span');
          wrapper.classList.add('custom-fool-wrapper');
          wrapper.innerHTML = `<slot></slot>`;
          shadow.appendChild(wrapper);
        }
      }

      customElements.define('custom-boof', CustomBoof);
      customElements.define('custom-boonberry', CustomBoonberry);
      customElements.define('custom-fool', CustomFool);

      // Dynamic Mood Stylesheet Loading
      document.addEventListener('DOMContentLoaded', () => {
        const mood = document.body.getAttribute('data-mood') || 'default';
        const moodStylesheet = document.getElementById('mood-styles');
        moodStylesheet.href = `/css/moods/${mood}.css`;
      });

      // Static Lore Data
      const staticLoreItems = [
        "The Fool is a master of disguise.",
        "Boonberries are said to grant wishes.",
        "Boof's journey is just beginning."
      ];

      // Event Handling for Lore Button
      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('lore-button').addEventListener('click', () => {
          const loreCollector = document.getElementById('lore-collector');
          loreCollector.innerHTML = ''; // Clear existing items
          staticLoreItems.forEach(item => {
            const listItem = document.createElement('li');
            listItem.textContent = item;
            loreCollector.appendChild(listItem);
          });
        });
      });

      // Accessibility Enhancements for data-content_id spans
      document.addEventListener('DOMContentLoaded', () => {
        const interactiveSpans = document.querySelectorAll('span[data-content_id]');
        interactiveSpans.forEach(span => {
          span.setAttribute('tabindex', '0');
          span.addEventListener('click', () => {
            // Handle click event
          });
          span.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' || event.key === ' ') {
              event.preventDefault();
              // Handle activation on Enter or Space key
            }
          });
        });
      });
    </script>

    <!-- External JavaScript Files -->
    <!-- <script defer src="/js/custom-components.js?v=2024_10_04.I"></script> -->
</head>
<body data-mood="boon">
<!-- Navigation Controls -->
<nav>
    <ul class="navigation">
        <li><a href="/book/chapter/00/index.html" class="prev-chapter">Previous Chapter</a></li>
        <li><a href="/book/chapter/01/index.html" class="current-chapter">Chapter 1</a></li>
        <li><a href="/book/chapter/02/index.html" class="next-chapter">Next Chapter</a></li>
    </ul>
</nav>

<main class="chapter">
    <h1>Chapter 1: Boof and the Boonberry Fool</h1>

    <custom-boof data-mood="boon">
        <p>
            Boof wandered through the <custom-boonberry>fields</custom-boonberry> in search of the elusive <custom-fool>Boonberry Fool</custom-fool>.
            "Where could it be?" Boof whispered to the wind, but only the trees answered with rustling leaves.
        </p>
    </custom-boof>

    <custom-boonberry>
        <p data-content_id="berry">
            The boonberries shimmered in the morning light, each one more dazzling than the last. But the Fool was nowhere in sight.
        </p>
    </custom-boonberry>

    <custom-boof>
        <p>
            Just then, a shadow danced between the trees—a hint, perhaps? Or merely the folly of a fruitless quest?
        </p>
    </custom-boof>

    <figure>
        <img src="/book/chapter/01/01.png" alt="Boof in search of the Boonberry Fool">
        <figcaption>Boof in pursuit of the Boonberry Fool</figcaption>
    </figure>

    <custom-fool>
        "Catch me if you can," the Fool’s voice echoed from the distance, teasing Boof onward.
    </custom-fool>

    <section>
        <h2>The Elusive Boonberry Fool</h2>
        <p>
            The Boonberry Fool was more than just a figure—it was a challenge, an idea, a riddle wrapped in a fool's grin.
            Boof continued, driven by the mystery and the promise of something more at the heart of the boonberry grove.
        </p>
    </section>

    <!-- Section Navigation -->
    <div class="section-navigation">
        <button class="prev-section">Previous Section</button>
        <button class="next-section">Next Section</button>
    </div>

</main>

<!-- Character Profile and Timeline Links -->
<aside>
    <ul id="lore-collector" aria-live="polite"></ul>
    <button id="lore-button" aria-controls="lore-collector">Uncover the Fool’s secret</button>

    <div class="additional-links">
        <a href="/characters/boof.html" class="character-profile">Boof's Profile</a>
        <a href="/book/timeline.html" class="story-timeline">Story Timeline</a>
    </div>

    <!-- Primary Action Button -->
    <button class="primary-action">Advance Story</button>
</aside>

</body>
</html>
